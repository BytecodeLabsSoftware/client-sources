package io.github.liticane.clients.feature.module.impl.exploit;

import io.github.liticane.clients.feature.event.api.EventListener;
import io.github.liticane.clients.feature.event.api.annotations.SubscribeEvent;
import io.github.liticane.clients.feature.event.impl.other.PacketEvent;
import io.github.liticane.clients.feature.module.Module;
import io.github.liticane.clients.feature.property.impl.StringProperty;
import io.github.liticane.clients.util.player.PacketUtil;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C17PacketCustomPayload;

@Module.Info(name = "ClientBrand", category = Module.Category.EXPLOIT)
public class ClientBrand extends Module {
    public StringProperty mode = new StringProperty("Mode", this, "Lunar", "Lunar", "Cheat Breaker", "Forge");

    @SubscribeEvent()
    public final EventListener<PacketEvent> onPacketSend = event -> {
        this.setSuffix(mode.getMode());
        final Packet<?> p = event.getPacket();
        if (p instanceof C17PacketCustomPayload) {
            final C17PacketCustomPayload wrapper = (C17PacketCustomPayload) p;
            switch (mode.getMode()) {
                case "Lunar":
                    wrapper.setChannel("REGISTER");
                    wrapper.setBufferData(PacketUtil.createPacketBuffer("Lunar-Client", false));
                    break;
                case "Cheat Breaker":
                    wrapper.setBufferData(PacketUtil.createPacketBuffer("CB", true));
                    break;
                case "Forge":
                    wrapper.setBufferData(PacketUtil.createPacketBuffer("FML", true));
                    break;
            }
        }
    };

}
