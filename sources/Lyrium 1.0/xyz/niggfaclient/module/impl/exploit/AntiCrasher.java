// 
// Decompiled by Procyon v0.5.36
// 

package xyz.niggfaclient.module.impl.exploit;

import net.minecraft.network.play.server.S27PacketExplosion;
import net.minecraft.network.play.server.S2APacketParticles;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import net.minecraft.network.play.server.S0FPacketSpawnMob;
import xyz.niggfaclient.eventbus.annotations.EventLink;
import xyz.niggfaclient.events.impl.PacketEvent;
import xyz.niggfaclient.eventbus.Listener;
import xyz.niggfaclient.module.Category;
import xyz.niggfaclient.module.ModuleInfo;
import xyz.niggfaclient.module.Module;

@ModuleInfo(name = "AntiCrasher", description = "If servers tries to crash your mc, you won't", cat = Category.EXPLOIT)
public class AntiCrasher extends Module
{
    @EventLink
    private final Listener<PacketEvent> packetEventListener;
    
    public AntiCrasher() {
        S08PacketPlayerPosLook s08;
        S2APacketParticles s2a;
        S27PacketExplosion s9;
        this.packetEventListener = (e -> {
            if (e.getState() == PacketEvent.State.RECEIVE) {
                if (this.mc.thePlayer != null && this.mc.theWorld != null) {
                    if (e.getPacket() instanceof S0FPacketSpawnMob && this.mc.theWorld.loadedEntityList.size() > 500) {
                        e.setCancelled();
                    }
                    if (e.getPacket() instanceof S08PacketPlayerPosLook) {
                        s08 = (S08PacketPlayerPosLook)e.getPacket();
                        if (s08.getYaw() > 380.0f || s08.getYaw() < -380.0f || s08.getPitch() < -90.0f || s08.getPitch() > 90.0f) {
                            e.setCancelled();
                        }
                        if (s08.getX() > 2.0E7 || s08.getY() > 2.0E7 || s08.getZ() > 2.0E7 || s08.getX() < -2.0E7 || s08.getY() < -2.0E7 || s08.getZ() < -2.0E7) {
                            e.setCancelled();
                        }
                    }
                    if (e.getPacket() instanceof S2APacketParticles) {
                        s2a = (S2APacketParticles)e.getPacket();
                        if (s2a.getParticleCount() > 1024) {
                            e.setCancelled();
                        }
                    }
                    if (e.getPacket() instanceof S27PacketExplosion) {
                        s9 = (S27PacketExplosion)e.getPacket();
                        if (s9.func_149144_d() > 10000.0f || s9.func_149147_e() > 10000.0f || s9.func_149149_c() > 10000.0f || s9.getX() > 10000.0 || s9.getY() > 10000.0 || s9.getZ() > 10000.0) {
                            e.setCancelled();
                        }
                    }
                }
            }
        });
    }
}
