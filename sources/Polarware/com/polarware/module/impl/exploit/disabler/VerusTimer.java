package com.polarware.module.impl.exploit.disabler;

import com.polarware.event.annotations.EventLink;
import com.polarware.event.bus.Listener;
import com.polarware.event.impl.network.PacketSendEvent;
import com.polarware.module.impl.exploit.DisablerModule;
import com.polarware.util.chat.ChatUtil;
import com.polarware.value.Mode;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;

public class VerusTimer extends Mode<DisablerModule> {
    public VerusTimer(String name, DisablerModule parent) {
        super(name, parent);
    }

    @Override
    public void onEnable() {
        ChatUtil.display("U have to be in a block for it to worki");
        super.onEnable();
    }

    @EventLink()
    public final Listener<PacketSendEvent> onPacketSend = event -> {
        if(event.getPacket() instanceof C00PacketKeepAlive) {
            ChatUtil.display("Canceled Incom");
            event.setCancelled(true);
        }
        if(event.getPacket() instanceof S08PacketPlayerPosLook) {
            ChatUtil.display("Cancelled Out");
            event.setCancelled(true);
        }
    };
}
