package com.polarware.module.impl.exploit;

import com.polarware.component.impl.player.PingSpoofComponent;
import com.polarware.module.Module;
import com.polarware.module.api.Category;
import com.polarware.module.api.ModuleInfo;
import com.polarware.event.bus.Listener;
import com.polarware.event.annotations.EventLink;
import com.polarware.event.impl.motion.PreUpdateEvent;
import com.polarware.util.math.MathUtil;
import com.polarware.value.impl.BooleanValue;
import com.polarware.value.impl.BoundsNumberValue;

/**
 * @author Alan
 * @since 28/05/2022
 */
@ModuleInfo(name = "module.combat.pingspoof.name", description = "module.exploit.pingspoof.description", category = Category.EXPLOIT)
public class PingSpoofModule extends Module {

    private final BoundsNumberValue delay = new BoundsNumberValue("Delay", this, 1000, 1500, 50, 30000, 1);
    private final BooleanValue teleports = new BooleanValue("Delay Teleports", this, false);
    private final BooleanValue velocity = new BooleanValue("Delay Velocity", this, false);
    private final BooleanValue world = new BooleanValue("Delay Block Updates", this, false);
    private final BooleanValue entities = new BooleanValue("Delay Entity Movements", this, false);

    @EventLink()
    public final Listener<PreUpdateEvent> onPreUpdate = event -> {
        PingSpoofComponent.setSpoofing((int) MathUtil.getRandom(delay.getValue().intValue(), delay.getSecondValue().intValue()),
                true, teleports.getValue(), velocity.getValue(), world.getValue(), entities.getValue());
    };
}
