package club.marsh.bloom.impl.mods.exploit.disablers;

import java.util.Deque;
import java.util.concurrent.ConcurrentLinkedDeque;

import club.marsh.bloom.api.components.BlinkingComponent;
import com.google.common.eventbus.Subscribe;
import club.marsh.bloom.api.module.Mode;
import club.marsh.bloom.api.module.Module;
import club.marsh.bloom.api.value.Value;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.*;
import club.marsh.bloom.impl.events.PacketEvent;
import club.marsh.bloom.impl.events.UpdateEvent;

public class VulcanDisabler extends Mode {
	
	int ticks;
	private final Deque<Packet<?>> packetDeque = new ConcurrentLinkedDeque<>();
	
	public VulcanDisabler(Module original, String name, Value mode) {
		super(original, name, mode);
	}
	
	@Override
	public void onDisable() {
		if (!this.canBeUsed()) return;
		BlinkingComponent.INSTANCE.releasePackets();
		BlinkingComponent.INSTANCE.setOn(false);
		BlinkingComponent.INSTANCE.setServerside(false);
	}
	
	@Subscribe
	public void onUpdate(UpdateEvent e) {
		if (!this.canBeUsed()) return;
		//mc.getNetHandler().addToSendQueueSilent(new C07PacketPlayerDigging());
		BlinkingComponent.INSTANCE.setOn(true);
		BlinkingComponent.INSTANCE.setServerside(true);
		if (mc.thePlayer.ticksExisted % 2 == 0)
			BlinkingComponent.INSTANCE.releasePackets();
	}
	
	@Subscribe
	public void onPacket(PacketEvent e) {
		if (!this.canBeUsed()) return;

		
	}
	

}
