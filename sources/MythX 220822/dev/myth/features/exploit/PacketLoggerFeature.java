/**
 * @project mythrecode
 * @prod HardcodeProductions
 * @author Auxy
 * @at 10.08.22, 03:15
 */
package dev.myth.features.exploit;

import dev.codeman.eventbus.Handler;
import dev.codeman.eventbus.Listener;
import dev.myth.api.event.EventState;
import dev.myth.api.feature.Feature;
import dev.myth.events.PacketEvent;
import dev.myth.settings.BooleanSetting;

@Feature.Debug
@Feature.Info(name = "PacketLogger", category = Feature.Category.EXPLOIT)
public class PacketLoggerFeature extends Feature {

    public BooleanSetting logServer = new BooleanSetting("Log Server", false);
    public BooleanSetting logClient = new BooleanSetting("Log Client", false);

    @Handler
    public final Listener<PacketEvent> packetEventListener = packetEvent -> {
        if(packetEvent.getState() == EventState.RECEIVING && !logServer.getValue()) return;
        if(packetEvent.getState() == EventState.SENDING && !logClient.getValue()) return;
        doLog(packetEvent.getPacket().getClass().getSimpleName() + " | Time: " + System.currentTimeMillis());
    };
}
